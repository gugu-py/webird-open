{% extends 'common.html' %}
{% load custom_filters %}
{% block links %}
{% endblock %}

{% block css %}
    .gallery {
        columns: 3;
        column-gap: 15px;
    }

    .item {
        display: inline-block;
{#        width: 100%;#}
        height: 185px;
        margin-bottom: 15px;
        position: relative;
    }

    .item img {
        width: 100%;
        display: block;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        opacity: 0;
        transition: opacity 0.3s ease;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .item:hover .overlay {
        opacity: 1;
    }

    .overlay-text {
        color: #fff;
        font-size: 1.5rem;
        text-align: center;
        padding: 20px;
    }

    .overlay.show {
        opacity: 1;
    }

    .pagination {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }

    .pagination-link {
      margin: 0 5px;
      padding: 5px 10px;
      color: #333;
      text-decoration: none;
      border: 1px solid #ccc;
      border-radius: 3px;
      transition: background-color 0.3s;
    }

    .pagination-link:hover {
      background-color: #f9f9f9;
    }
{% endblock %}

{% block content %}
    <div style="margin: 30px auto">
        <form method="get">
    {#        {% csrf_token %}#}
            {{ form }}
            <input type="submit" value="submit">
        </form>
    </div>
    {% if result.count == 0 %}
        <div>Nobody here but us chickens!</div>
    {% endif %}
    <div class="gallery">
        {% for item in result %}
        	<div class="item">
                <a href="{{ item.ori_src }}" target="_blank">
                    <img src="{{ item.src }}" alt="{{ item.src }} Image">
                    <div class="overlay">
                        <div class="overlay-text">
{#                        {{ item.bird_id | id_get_bird_whole_name }}#}
{#                            {% if item.eng_species %}#}
{#                            	{{ item.eng_species }}#}
{#                            {% else %}#}
{#                                {{ item.chi_species }}#}
{#                            {% endif %}#}
                             {{ item.description }}
                        </div>
                    </div>
                </a>
            </div>
        {% endfor %}
    </div>
    <div class="pagination">
        {% if result.has_previous %}
            <a href="?page=1" class="pagination-link">&laquo;</a>
            <a href="?page={{ result.previous_page_number }}" class="pagination-link">&lsaquo;</a>
        {% endif %}

        <span class="current-page">{{ result.number }}</span>

        {% if result.has_next %}
            <a href="?page={{ result.next_page_number }}" class="pagination-link">&rsaquo;</a>
            <a href="?page={{ result.paginator.num_pages }}" class="pagination-link">&raquo;</a>
        {% endif %}
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var items = document.querySelectorAll('.item');
            items.forEach(function(item) {
                item.addEventListener('click', function() {
                    this.querySelector('.overlay').classList.toggle('show');
                });
            });
        });
    </script>
{% endblock %}
